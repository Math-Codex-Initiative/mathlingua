(this["webpackJsonpmathlingua-client"]=this["webpackJsonpmathlingua-client"]||[]).push([[0],{10:function(e,t,n){e.exports={triangle:"PathTreeItem_triangle__1r7e7",link:"PathTreeItem_link__2zHfD",sidePanelItem:"PathTreeItem_sidePanelItem__1A12M",mathlinguaListDirItem:"PathTreeItem_mathlinguaListDirItem__3BEwG",mathlinguaListFileItem:"PathTreeItem_mathlinguaListFileItem__1JNHt",selected:"PathTreeItem_selected__r_5l2",errorStats:"PathTreeItem_errorStats__1EFpQ",button:"PathTreeItem_button__1hcH-",input:"PathTreeItem_input__1EXXq"}},123:function(e,t,n){},132:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),i=n(37),c=n.n(i),s=(n(84),n(13)),o=n(16),u=n(29),l=n(28),d=n(70),h=n.n(d),p=n(71),f=n.n(p),b=n(72),v=n.n(b),m=n(19);function j(){return window.screen.width<=600}var x={sidePanelVisible:!j()},g=Object(m.b)({name:"sidePanelVisible",initialState:x,reducers:{sidePanelVisibilityChanged:function(e,t){e.sidePanelVisible=t.payload}}}),O=function(e){return e.sidePanelVisible.sidePanelVisible},y=g.actions.sidePanelVisibilityChanged,w=g.reducer,k=n(21),P=function(){return Object(k.c)()},_=k.d,C=n(6),E=n(8),N=n(0),S=function(){var e=_(O),t=P();return Object(N.jsx)("div",{style:{display:"flex",alignItems:"center",padding:0,marginLeft:0,marginRight:0,marginTop:0,marginBottom:"auto"},children:Object(N.jsx)("button",{className:v.a.sidePanelButton,onClick:function(){t(y(!e))},children:Object(N.jsx)(C.a,{icon:E.c,style:{filter:"drop-shadow(0.45px 0.45px 0px rgba(0, 0, 0, 0.2))"}})})})},I=n(2),T=n.n(I),R=n(3),L=n(5),A=n(23),M=n.n(A),D=n(12),B=n(11),F=n.n(B),U=function e(t){Object(s.a)(this,e),this.isWord=void 0,this.children=void 0,this.isWord=t,this.children=new Map},H=function(){function e(){Object(s.a)(this,e),this.root=new U(!1)}return Object(o.a)(e,[{key:"add",value:function(e){this.addToTrie(this.root,e.toLowerCase(),0)}},{key:"getSuffixes",value:function(e){return this.searchTrie(this.root,e.toLowerCase())}},{key:"addToTrie",value:function(e,t,n){if(!(n>=t.length)){var r=t[n];e.children.has(r)||e.children.set(r,{isWord:n===t.length-1,children:new Map});var a=e.children.get(r);n===t.length-1&&(a.isWord=!0),this.addToTrie(a,t,n+1)}}},{key:"searchTrie",value:function(e,t){var n=this.findTrieLeaf(e,t,0);if(!n)return[];var r=new Set;return this.getWordsUnder("","",n,r),Array.from(r)}},{key:"findTrieLeaf",value:function(e,t,n){if(n>=t.length)return e;var r=t[n];return e.children.has(r)?this.findTrieLeaf(e.children.get(r),t,n+1):null}},{key:"getWordsUnder",value:function(e,t,n,r){if(n){e+=t,n.isWord&&r.add(e);var a,i=Object(D.a)(n.children.keys());try{for(i.s();!(a=i.n()).done;){var c=a.value;this.getWordsUnder(e,c,n.children.get(c),r)}}catch(s){i.e(s)}finally{i.f()}e=e.substring(0,e.length-1)}}}]),e}(),V=function(){function e(t){Object(s.a)(this,e),this.searchIndex=new Map;var n,r=Object(D.a)(t.collectionResult.fileResults);try{for(r.s();!(n=r.n()).done;){var a,i=n.value,c=Object(D.a)(i.entities);try{for(c.s();!(a=c.n()).done;){var o,u=a.value,l=Object(D.a)(u.words);try{for(l.s();!(o=l.n()).done;){var d,h=o.value.toLowerCase(),p=null!==(d=this.searchIndex.get(h))&&void 0!==d?d:new Set;p.add(i.relativePath),this.searchIndex.set(h,p)}}catch(f){l.e(f)}finally{l.f()}}}catch(f){c.e(f)}finally{c.f()}}}catch(f){r.e(f)}finally{r.f()}}return Object(o.a)(e,[{key:"search",value:function(e){var t,n=e.split(" ").map((function(e){return e.trim().toLowerCase()})).filter((function(e){return e.length>0}));if(0===n.length)return[];var r=null!==(t=this.searchIndex.get(n[0]))&&void 0!==t?t:new Set;if(0===r.size)return[];for(var a=1;a<n.length;a++){var i;r=W(r,null!==(i=this.searchIndex.get(n[a]))&&void 0!==i?i:new Set)}return Array.from(r)}}]),e}();function W(e,t){if(t.size>e.size)return W(t,e);for(var n=new Set,r=0,a=Array.from(e.values());r<a.length;r++){var i=a[r];t.has(i)&&n.add(i)}return n}function $(e){console.error(e)}var q=function(){function e(){Object(s.a)(this,e)}return Object(o.a)(e,[{key:"getAllPaths",value:function(){var e=Object(R.a)(T.a.mark((function e(){var t;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F.a.get("/api/allPaths");case 3:return t=e.sent,e.abrupt("return",t.data.paths);case 7:return e.prev=7,e.t0=e.catch(0),$(e.t0.message),e.abrupt("return",[]);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"getFileResult",value:function(){var e=Object(R.a)(T.a.mark((function e(t){var n;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F.a.get("/api/fileResult",{params:{path:t}});case 3:return n=e.sent,e.abrupt("return",n.data);case 7:return e.prev=7,e.t0=e.catch(0),$(e.t0.message),e.abrupt("return",void 0);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"search",value:function(){var e=Object(R.a)(T.a.mark((function e(t){var n;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F.a.get("/api/search",{params:{query:t}});case 3:return n=e.sent,e.abrupt("return",n.data.paths);case 7:return e.prev=7,e.t0=e.catch(0),$(e.t0.message),e.abrupt("return",[]);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getAutocompleteSuffixes",value:function(){var e=Object(R.a)(T.a.mark((function e(t){var n;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F.a.get("/api/completeWord",{params:{word:t}});case 3:return n=e.sent,e.abrupt("return",n.data.suffixes);case 7:return e.prev=7,e.t0=e.catch(0),$(e.t0.message),e.abrupt("return",[]);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getEntityWithSignature",value:function(){var e=Object(R.a)(T.a.mark((function e(t){var n;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F.a.get("/api/withSignature",{params:{signature:t}});case 3:return n=e.sent,e.abrupt("return",n.data);case 7:return e.prev=7,e.t0=e.catch(0),$(e.t0.message),e.abrupt("return",void 0);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"check",value:function(){var e=Object(R.a)(T.a.mark((function e(){var t;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F.a.get("/api/check");case 3:return t=e.sent,e.abrupt("return",t.data);case 7:return e.prev=7,e.t0=e.catch(0),$(e.t0.message),e.abrupt("return",{errors:[]});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"getGitHubUrl",value:function(){var e=Object(R.a)(T.a.mark((function e(){var t,n;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F.a.get("/api/gitHubUrl");case 3:return t=e.sent,n=t.data,e.abrupt("return",n.url);case 8:return e.prev=8,e.t0=e.catch(0),$(e.t0.message),e.abrupt("return",void 0);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),G=function(){function e(t){Object(s.a)(this,e),this.searchClient=void 0,this.autoCompleteClient=void 0,this.allPaths=void 0,this.signatureToEntity=void 0,this.pathToFileResult=void 0,this.firstFileResult=void 0,this.checkResponse=void 0,this.gitHubUrl=void 0,this.searchClient=new V(t),this.autoCompleteClient=new H;var n,r=Object(D.a)(t.collectionResult.fileResults);try{for(r.s();!(n=r.n()).done;){var a,i=n.value,c=Object(D.a)(i.entities);try{for(c.s();!(a=c.n()).done;){var o,u=a.value,l=Object(D.a)(u.words);try{for(l.s();!(o=l.n()).done;){var d=o.value;this.autoCompleteClient.add(d)}}catch(O){l.e(O)}finally{l.f()}}}catch(O){c.e(O)}finally{c.f()}}}catch(O){r.e(O)}finally{r.f()}this.allPaths=t.collectionResult.fileResults.map((function(e){return e.relativePath})),this.signatureToEntity=new Map;var h,p=Object(D.a)(t.collectionResult.fileResults);try{for(p.s();!(h=p.n()).done;){var f,b=h.value,v=Object(D.a)(b.entities);try{for(v.s();!(f=v.n()).done;){var m=f.value;this.signatureToEntity.set(m.signature,m)}}catch(O){v.e(O)}finally{v.f()}}}catch(O){p.e(O)}finally{p.f()}this.firstFileResult=t.collectionResult.fileResults[0],this.pathToFileResult=new Map;var j,x=Object(D.a)(t.collectionResult.fileResults);try{for(x.s();!(j=x.n()).done;){var g=j.value;this.pathToFileResult.set(g.relativePath,g)}}catch(O){x.e(O)}finally{x.f()}this.checkResponse={errors:t.collectionResult.errors.map((function(e){return{column:e.column,row:e.row,path:e.relativePath,message:e.message}}))},this.gitHubUrl=t.gitHubUrl}return Object(o.a)(e,[{key:"getAllPaths",value:function(){var e=Object(R.a)(T.a.mark((function e(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.allPaths);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getFileResult",value:function(){var e=Object(R.a)(T.a.mark((function e(t){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==t){e.next=2;break}return e.abrupt("return",this.firstFileResult);case 2:return e.abrupt("return",this.pathToFileResult.get(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"search",value:function(){var e=Object(R.a)(T.a.mark((function e(t){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.searchClient.search(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAutocompleteSuffixes",value:function(){var e=Object(R.a)(T.a.mark((function e(t){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.autoCompleteClient.getSuffixes(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getEntityWithSignature",value:function(){var e=Object(R.a)(T.a.mark((function e(t){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.signatureToEntity.get(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"check",value:function(){var e=Object(R.a)(T.a.mark((function e(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.checkResponse);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getGitHubUrl",value:function(){var e=Object(R.a)(T.a.mark((function e(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.gitHubUrl);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),z=null;function J(){if(!z){var e=window.MATHLINGUA_DATA;z=e?new G(e):new q}return z}function K(){return!!window.MATHLINGUA_DATA}function X(){return Z.apply(this,arguments)}function Z(){return(Z=Object(R.a)(T.a.mark((function e(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",J().getAllPaths());case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Q(e){return Y.apply(this,arguments)}function Y(){return(Y=Object(R.a)(T.a.mark((function e(t){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",J().getFileResult(t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ee(e){return te.apply(this,arguments)}function te(){return(te=Object(R.a)(T.a.mark((function e(t){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",J().search(t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ne(e){return re.apply(this,arguments)}function re(){return(re=Object(R.a)(T.a.mark((function e(t){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",J().getAutocompleteSuffixes(t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ae(e){return ie.apply(this,arguments)}function ie(){return(ie=Object(R.a)(T.a.mark((function e(t){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",J().getEntityWithSignature(t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ce(){return se.apply(this,arguments)}function se(){return(se=Object(R.a)(T.a.mark((function e(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",J().check());case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function oe(){return(oe=Object(R.a)(T.a.mark((function e(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",J().getGitHubUrl());case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ue(e,t){return le.apply(this,arguments)}function le(){return(le=Object(R.a)(T.a.mark((function e(t,n){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F.a.put("/api/writePage",{path:t,content:n});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),$(e.t0.message);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}function de(){return(de=Object(R.a)(T.a.mark((function e(t){var n;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F.a.get("/api/readPage",{params:{path:t}});case 3:return n=e.sent,e.abrupt("return",n.data.content);case 7:return e.prev=7,e.t0=e.catch(0),$(e.t0.message),e.abrupt("return","");case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function he(e){return pe.apply(this,arguments)}function pe(){return(pe=Object(R.a)(T.a.mark((function e(t){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F.a.post("/api/deleteDir",{path:t});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),$(e.t0.message);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}function fe(e){return be.apply(this,arguments)}function be(){return(be=Object(R.a)(T.a.mark((function e(t){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F.a.post("/api/deleteFile",{path:t});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),$(e.t0.message);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}function ve(e,t){return me.apply(this,arguments)}function me(){return(me=Object(R.a)(T.a.mark((function e(t,n){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F.a.post("/api/renameDir",{fromPath:t,toPath:n});case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),$(e.t0.message),e.abrupt("return");case 9:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}function je(e,t){return xe.apply(this,arguments)}function xe(){return(xe=Object(R.a)(T.a.mark((function e(t,n){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F.a.post("/api/renameFile",{fromPath:t,toPath:n});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),$(e.t0.message);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}function ge(e){return Oe.apply(this,arguments)}function Oe(){return(Oe=Object(R.a)(T.a.mark((function e(t){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F.a.post("/api/newDir",{path:t});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),$(e.t0.message);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}function ye(e){return we.apply(this,arguments)}function we(){return(we=Object(R.a)(T.a.mark((function e(t){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F.a.post("/api/newFile",{path:t});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),$(e.t0.message);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}function ke(e){return Pe.apply(this,arguments)}function Pe(){return(Pe=Object(R.a)(T.a.mark((function e(t){var n;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F.a.get("/api/completeSignature",{params:{prefix:t}});case 3:return n=e.sent,e.abrupt("return",n.data.suffixes);case 7:return e.prev=7,e.t0=e.catch(0),$(e.t0.message),e.abrupt("return",[]);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function _e(){return(_e=Object(R.a)(T.a.mark((function e(){var t;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F.a.get("/api/firstPath");case 3:return t=e.sent,e.abrupt("return",t.data.path);case 7:return e.prev=7,e.t0=e.catch(0),$(e.t0.message),e.abrupt("return","");case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}var Ce=n(78),Ee=Object(m.b)({name:"paths",initialState:{paths:[]},reducers:{pathsUpdated:function(e,t){t.payload?e.paths=Object(Ce.a)(t.payload):e.paths=t.payload}}}),Ne=function(e){return e.paths.paths},Se=Ee.actions.pathsUpdated,Ie=function(e){return function(){var t=Object(R.a)(T.a.mark((function t(n){var r;return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ee(e);case 2:r=t.sent,n(Se(r));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Te=Ee.reducer,Re=Object(m.b)({name:"query",initialState:{query:""},reducers:{queryUpdated:function(e,t){e.query=t.payload}}}),Le=function(e){return e.query.query},Ae=Re.actions.queryUpdated,Me=Re.reducer,De=function(){var e=Object(k.c)(),t=Object(r.useRef)(null),n=Object(r.useState)(""),a=Object(L.a)(n,2),i=a[0],c=a[1],s=Object(r.useState)("none"),o=Object(L.a)(s,2),u=o[0],l=o[1],d=Object(r.useState)([]),h=Object(L.a)(d,2),p=h[0],f=h[1],b=Object(r.useState)(-1),v=Object(L.a)(b,2),m=v[0],j=v[1];function x(e){if(!e)return e;var t=e.split(" ").filter((function(e){return e.length>0}));return t[t.length-1]}function g(e){l(e?"block":"none")}function O(){return(O=Object(R.a)(T.a.mark((function e(t){var n,r,a,i;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target.value||"",r=x(n),e.prev=2,e.next=5,ne(r);case 5:a=e.sent,f(a.map((function(e){return{complete:r+e,suffix:e}}))),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),i="ERROR: ".concat(e.t0.message),f([{complete:i,suffix:i}]);case 13:g(!0),c(n);case 15:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function w(e){return P.apply(this,arguments)}function P(){return(P=Object(R.a)(T.a.mark((function t(n){return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e(Ie(n)),g(!1),e(Ae(n)),e(y(!0));case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function _(e){var t=i.toLowerCase()+e.toLowerCase();return c(t),g(!1),t}function S(){return(S=Object(R.a)(T.a.mark((function e(t){var n,r;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("Escape"!==t.key){e.next=5;break}return g(!1),e.abrupt("return");case 5:if("Enter"!==t.key){e.next=19;break}if(t.preventDefault(),"none"===u){e.next=15;break}return n=p[m],r=i,n&&(r=_(n.suffix)),e.next=13,w(r);case 13:e.next=17;break;case 15:return e.next=17,w(i);case 17:e.next=31;break;case 19:if("ArrowDown"!==t.key){e.next=26;break}return t.preventDefault(),g(!0),j(Math.min(m+1,p.length-1)),e.abrupt("return");case 26:if("ArrowUp"!==t.key){e.next=31;break}return t.preventDefault(),g(!0),j(Math.max(m-1,0)),e.abrupt("return");case 31:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useEffect)((function(){document.addEventListener("click",(function(e){t.current&&!t.current.contains(e.target)&&g(!1)}))}),[]),Object(N.jsxs)("span",{className:M.a.searchArea,children:[Object(N.jsx)("input",{type:"text",id:"search-input",className:M.a.search,"aria-label":"search",value:i,onChange:function(e){return O.apply(this,arguments)},onKeyUp:function(e){return S.apply(this,arguments)}}),Object(N.jsx)("button",{type:"button",className:M.a.searchButton,onClick:function(){return w(i)},children:Object(N.jsx)(C.a,{icon:E.l,style:{filter:"drop-shadow(0.45px 0.45px 0px rgba(0, 0, 0, 0.2))"}})}),Object(N.jsx)("button",{type:"button",className:M.a.clearButton,onClick:function(){c(""),g(!1),e(Se(void 0)),e(Ae("")),e(y(!0))},children:Object(N.jsx)(C.a,{icon:E.n,style:{filter:"drop-shadow(0.45px 0.45px 0px rgba(0, 0, 0, 0.2))"}})}),Object(N.jsx)("div",{ref:t,className:M.a.searchDropdown,style:{display:u},children:p.map((function(e,t){return Object(N.jsx)("div",{onClick:function(){return w(_(e.suffix))},className:t===m?M.a.searchDropdownItemSelected:M.a.searchDropdownItem,children:Object(N.jsx)("div",{children:e.complete.toLowerCase()})},e.complete.toLowerCase())}))})]})},Be=n(45),Fe=n.n(Be),Ue=n(46),He=function(){var e=Object(r.useState)(""),t=Object(L.a)(e,2),n=t[0],a=t[1];return Object(r.useEffect)((function(){(function(){return oe.apply(this,arguments)})().then((function(e){return a(e)}))}),[]),Object(N.jsx)("div",{style:{display:"flex",alignItems:"center",padding:0,marginLeft:0,marginRight:0,marginTop:0,marginBottom:"auto"},children:n?Object(N.jsx)("a",{href:n,target:"_blank",children:Object(N.jsx)(C.a,{className:Fe.a.githubIcon,icon:Ue.a,style:{filter:"drop-shadow(0.45px 0.45px 0px rgba(0, 0, 0, 0.2))"}})}):Object(N.jsx)(C.a,{className:Fe.a.githubIcon,icon:Ue.a,style:{filter:"drop-shadow(0.45px 0.45px 0px rgba(0, 0, 0, 0.2))"}})})},Ve=Object(m.b)({name:"errorResults",initialState:{errors:[]},reducers:{errorResultsUpdated:function(e,t){e.errors=t.payload}}}),We=function(e){return e.errorResults.errors},$e=Ve.actions.errorResultsUpdated,qe=Ve.reducer,Ge={isEditMode:!K()},ze=Object(m.b)({name:"isEditMode",initialState:Ge,reducers:{isEditModeUpdated:function(e,t){e.isEditMode=t.payload}}}),Je=function(e){return e.isEditMode.isEditMode},Ke=ze.actions.isEditModeUpdated,Xe=ze.reducer,Ze=n(73),Qe=n.n(Ze),Ye=function(){var e=P(),t=_(Je);return Object(N.jsx)("div",{style:{display:"flex",alignItems:"center",padding:0,marginLeft:0,marginRight:0,marginTop:0,marginBottom:"auto"},children:Object(N.jsx)("button",{className:Qe.a.editModeButton,onClick:Object(R.a)(T.a.mark((function n(){var r;return T.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e(Ke(!t)),n.next=3,ce();case 3:r=n.sent,e($e(r.errors.map((function(e){return{row:e.row,column:e.column,message:e.message,relativePath:e.path}}))));case 5:case"end":return n.stop()}}),n)}))),children:t?Object(N.jsx)(C.a,{icon:E.h,style:{filter:"drop-shadow(0.45px 0.45px 0px rgba(0, 0, 0, 0.2))"}}):Object(N.jsx)(C.a,{icon:E.g,style:{filter:"drop-shadow(0.45px 0.45px 0px rgba(0, 0, 0, 0.2))"}})})})},et=function(){return Object(N.jsxs)("div",{className:f.a.topbar,children:[Object(N.jsx)(S,{}),Object(N.jsx)(De,{}),K()?null:Object(N.jsx)(Ye,{}),Object(N.jsx)(He,{})]})},tt=n(27),nt=n(9),rt=n(53),at=n(74),it=n.n(at),ct=n(47),st=n(44),ot=(n(123),n(133)),ut=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).ref=void 0,r.ref=a.a.createRef(),r}return Object(o.a)(n,[{key:"componentDidMount",value:function(){ht(this.ref.current)}},{key:"componentDidUpdate",value:function(){ht(this.ref.current)}},{key:"render",value:function(){var e=this,t=function(e){var t=document.getElementById(e);t&&("mathlingua-dropdown-menu-hidden"===t.className?t.className="mathlingua-dropdown-menu-shown":t.className="mathlingua-dropdown-menu-hidden")},n=function(){var n=Object(R.a)(T.a.mark((function n(r,a){var i;return T.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t(a),n.next=3,ae(r);case 3:(i=n.sent)&&e.props.onViewEntity&&e.props.onViewEntity(i);case 5:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}();function r(){return(r=Object(R.a)(T.a.mark((function e(r,a){var i,c,s,o,u,l;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("mathlinguaToggleDropdown"!==r){e.next=8;break}if(i=a[0]){e.next=4;break}return e.abrupt("return");case 4:c=i.substring(1,i.length-1),t(c),e.next=16;break;case 8:if("mathlinguaViewSignature"!==r){e.next=16;break}if(s=a[0],o=a[1],s&&o){e.next=13;break}return e.abrupt("return");case 13:u=s.substring(1,s.length-1).replace(/\\\\/,"\\"),l=o.substring(1,o.length-1),n(u,l);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var a={replace:function(e){if(e instanceof st.Element&&e.attribs&&e.attribs.onclick){var t=e.attribs.onclick;delete e.attribs.onclick;var n=e.attribs.class;delete e.attribs.class;var i=/([a-zA-Z0-9]+)\((.*?)\)/.exec(t.trim());if(i&&3===i.length){var c=i[1],s=i[2].split(",").map((function(e){return e.trim()}));return Object(N.jsx)("span",{className:n,onClick:function(){return function(e,t){return r.apply(this,arguments)}(c,s)},children:Object(ct.b)(e.children,a)})}}}};return Object(N.jsx)("div",{ref:this.ref,children:Object(ct.a)(this.props.html.replace(/CUSTOM_SUFFIX/g,ot.a()),a)})}}]),n}(a.a.Component),lt=Object(k.b)()(ut);function dt(e){var t=e;'"'===t[0]&&(t=t.substring(1)),'"'===t[t.length-1]&&(t=t.substring(0,t.length-1)),t=t.replace(/([a-zA-Z0-9])\?\??/g,"$1");for(var n=document.createDocumentFragment(),r="",a=0;a<t.length;)if("$"===t[a]&&"$"===t[a+1]&&"$"===t[a+2]){a+=3,n.appendChild(document.createTextNode(r)),r="";for(var i=document.createElement("span"),c="";a<t.length&&("$"!==t[a]||"$"!==t[a+1]||"$"!==t[a+2]);)c+=t[a++];"$"===t[a]&&a++,"$"===t[a]&&a++,"$"===t[a]&&a++;try{katex.render(c,i,{throwOnError:!0,displayMode:!1})}catch(b){i.appendChild(document.createTextNode(c))}n.appendChild(i)}else if("\\"===t[a]&&"["===t[a+1]){a+=2,n.appendChild(document.createTextNode(r)),r="";var s=document.createElement("span");s.className="display-mode";for(var o="";a<t.length&&("\\"!==t[a]||"]"!==t[a+1]);)o+=t[a++];"\\"===t[a]&&a++,"]"===t[a]&&a++;try{katex.render(o,s,{throwOnError:!0,displayMode:!0})}catch(v){s.appendChild(document.createTextNode(o))}n.appendChild(s)}else if("\\"===t[a]&&"("===t[a+1]){a+=2,n.appendChild(document.createTextNode(r)),r="";for(var u=document.createElement("span"),l="";a<t.length&&("\\"!==t[a]||")"!==t[a+1]);)l+=t[a++];"\\"===t[a]&&a++,")"===t[a]&&a++;try{katex.render(l,u,{throwOnError:!0,displayMode:!1})}catch(m){u.appendChild(document.createTextNode(l))}n.appendChild(u)}else if("$"===t[a]&&"$"===t[a+1]){a+=2,n.appendChild(document.createTextNode(r)),r="";var d=document.createElement("span");d.className="display-mode";for(var h="";a<t.length&&("$"!==t[a]||"$"!==t[a+1]);)h+=t[a++];"$"===t[a]&&a++,"$"===t[a]&&a++;try{katex.render(h,d,{throwOnError:!0,displayMode:!0})}catch(j){d.appendChild(document.createTextNode(h))}n.appendChild(d)}else if("$"===t[a]){a++,n.appendChild(document.createTextNode(r)),r="";for(var p=document.createElement("span"),f="";a<t.length&&"$"!==t[a];)f+=t[a++];"$"===t[a]&&a++;try{katex.render(f,p,{throwOnError:!0,displayMode:!1})}catch(x){p.appendChild(document.createTextNode(f))}n.appendChild(p)}else r+=t[a++];return r.length>0&&n.appendChild(document.createTextNode(r)),n}function ht(e){if(!(e.className&&e.className.indexOf&&e.className.indexOf("no-render")>=0)){var t=!1;if("mathlingua"===e.className)for(var n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];if(r&&"mathlingua-header"===r.className&&"written:"===r.textContent){t=!0;break}}for(var a=0;a<e.childNodes.length;a++){var i=e.childNodes[a];if(3===i.nodeType){var c=i.textContent;if(c.trim()){t&&('"'===c[0]&&(c=c.substring(1)),'"'===c[c.length-1]&&(c=c.substring(0,c.length-1)),c="$$$"+c+"$$$");var s=dt(c);a+=s.childNodes.length-1,e.replaceChild(s,i)}}else 1===i.nodeType&&ht(i)}}}var pt=n(75),ft=n.n(pt),bt=function(e){return Object(N.jsx)("div",{className:ft.a.mathlinguaBlockCommentTopLevel,children:Object(N.jsx)(lt,{html:e.renderedHtml})})},vt=n(24),mt=n.n(vt),jt=n(48),xt=n.n(jt);function gt(e){return Object(N.jsxs)("div",{className:xt.a.errorMessage,children:[Object(N.jsx)("span",{className:xt.a.errorLabel,children:"ERROR:"})," ",e.message]})}var Ot=n(39),yt=n.n(Ot),wt=function(e){return Object(N.jsx)("div",{className:yt.a.entitiesPanel,style:e.entityPanes.length>0?{display:"block"}:{display:"none"},children:Object(N.jsxs)("div",{children:[Object(N.jsx)("button",{className:yt.a.closeAllButton,onClick:function(){e.onCloseAll&&e.onCloseAll()},"data-test-id":"close-all-entities",children:Object(N.jsx)(C.a,{icon:E.n})}),e.entityPanes.map((function(e){return Object(N.jsx)("span",{className:yt.a.entitiesPanelItem,children:e.topLevelEntry},e.id)}))]})})},kt=n(30),Pt=n.n(kt),_t=function(e){var t=Object(r.useState)(!0),n=Object(L.a)(t,2),a=n[0],i=n[1];return Object(N.jsxs)("div",{id:e.id,className:Pt.a.mathlinguaTopLevel,children:[e.showCloseButton?Object(N.jsx)("button",{className:Pt.a.mathlinguaCloseButton,onClick:function(){e.onEntityClosed&&e.onEntityClosed(e.id)},"data-test-id":"close-single-top-level-entry",children:Object(N.jsx)(C.a,{icon:E.n})}):null,Object(N.jsxs)("span",{className:Pt.a.mathlinguaIconPane,children:[e.showOpenButton?Object(N.jsx)(tt.b,{to:"/".concat(e.relativePath,"#").concat(e.id),className:Pt.a.mathlinguaOpenIcon,children:Object(N.jsx)(C.a,{icon:E.m})}):null,Object(N.jsx)("button",{className:Pt.a.mathlinguaFlipIcon,onClick:function(){i(!a)},children:"\u2022"})]}),a?Object(N.jsx)(lt,{onViewEntity:e.onViewEntity,html:e.renderedHtml}):Object(N.jsx)(lt,{onViewEntity:e.onViewEntity,html:e.rawHtml})]})},Ct=n(40),Et=n.n(Ct),Nt=function(e){var t=Object(r.useState)([]),n=Object(L.a)(t,2),a=n[0],i=n[1],c=function(e){i(a.concat({id:ot.a(),entityResult:e}))},s=function(e){i(a.filter((function(t){return t.id!==e})))};return Object(N.jsxs)("div",{className:Et.a.topLevelEntityGroup,children:[Object(N.jsx)(_t,{id:e.entity.id,relativePath:e.entity.relativePath,rawHtml:e.entity.rawHtml,renderedHtml:e.entity.renderedHtml,showOpenButton:!1,showCloseButton:!1,onViewEntity:c,onEntityClosed:s}),a.length>0?Object(N.jsx)("div",{className:Et.a.triangleBorder,children:Object(N.jsx)("div",{className:Et.a.triangle})}):null,Object(N.jsx)(wt,{entityPanes:a.map((function(e){return{id:e.id,topLevelEntry:Object(N.jsx)("div",{children:Object(N.jsx)(_t,{id:e.id,relativePath:e.entityResult.relativePath,showOpenButton:!0,showCloseButton:!0,rawHtml:e.entityResult.rawHtml,renderedHtml:e.entityResult.renderedHtml,onViewEntity:c,onEntityClosed:s})})}})),onCloseAll:function(){return i([])}})]})},St=n(76),It=n.n(St),Tt=n(77),Rt=n.n(Tt),Lt=n(51),At=(n(130),n(131),[{name:"and",value:"and:"},{name:"exists",value:"exists:\nsuchThat:"},{name:"existsUnique",value:"existsUnique:\nsuchThat:"},{name:"forAll",value:"forAll:\nsuchThat?:\nthen:"},{name:"if",value:"if:\nthen:"},{name:"iff",value:"iff:\nthen:"},{name:"not",value:"not:"},{name:"or",value:"or:"},{name:"piecewise",value:"piecewise:"},{name:"Defines:",value:"Defines:\nrequiring?:\nwhen?:\nmeans:\nevaluated?:\nviewing?:\nusing?:\nwritten:\ncalled:\nMetadata?:"},{name:"States",value:"States:\nrequiring?:\nwhen?:\nthat:\nusing?:\nwritten:\ncalled:\nMetadata?:"},{name:"equality",value:"equality:\nbetween:\nprovided:"},{name:"membership",value:"membership:\nthrough:"},{name:"as",value:"as:\nvia:\nby?:"},{name:"Resource",value:'Resource:\n. type?: ""\n. name?: ""\n. author?: ""\n. homepage?: ""\n. url?: ""\n. offset?: ""\nMetadata?:'},{name:"Axiom",value:"Axiom:\ngiven?:\nif?:\niff?:\nthen:\nusing?:\nMetadata?:"},{name:"Conjecture",value:"Conjecture:\ngiven?:\nif?:\niff?:\nthen:\nusing?:\nMetadata?:"},{name:"Theorem",value:"Theorem:\ngiven?:\nif?:\niff?:\nthen:\nusing?:\nProof?:\nMetadata?:"},{name:"Topic",value:"Topic:\ncontent:\nMetadata?:"},{name:"Note",value:"Note:\ncontent:\nMetadata?:"}]);document.addEventListener("keydown",(function(e){(e.ctrlKey||e.metaKey)&&"s"===e.key&&e.preventDefault()}));var Mt=function(e){var t=Object(r.useState)(void 0),n=Object(L.a)(t,2),a=n[0],i=n[1],c=Object(r.useState)(""),s=Object(L.a)(c,2),o=s[0],u=s[1],l=Object(r.useState)(!0),d=Object(L.a)(l,2),h=d[0],p=d[1],f=_(Je);return Object(r.useEffect)((function(){Q(e.viewedPath).then((function(e){e?(u(""),i(e)):u("Page Not Found"),p(!1)}))}),[f,e.viewedPath]),o?Object(N.jsx)("div",{className:mt.a.mathlinguaPage,children:Object(N.jsx)(gt,{message:o})}):a||h?!a||0===a.entities.length&&0===a.errors.length?null:f?Object(N.jsx)(Ut,{relativePath:e.viewedPath,errors:a.errors,entities:a.entities,targetId:e.targetId}):Object(N.jsx)(Dt,{isOnMobile:j(),fileResult:a,targetId:e.targetId}):Object(N.jsx)("div",{children:Object(N.jsx)(gt,{message:"Page Not Found"})})},Dt=function(e){return Object(N.jsxs)("div",{className:mt.a.mathlinguaPage,children:[Object(N.jsx)(Bt,{relativePath:e.fileResult.relativePath,errors:e.fileResult.errors,entities:e.fileResult.entities,targetId:e.targetId}),Object(N.jsxs)("div",{className:mt.a.linkPanel,children:[e.fileResult.previousRelativePath?Object(N.jsx)("a",{className:mt.a.previousLink,href:"#/".concat(e.fileResult.previousRelativePath),children:Object(N.jsx)(C.a,{icon:E.a})}):null,e.fileResult.nextRelativePath?Object(N.jsx)("a",{className:mt.a.nextLink,href:"#/".concat(e.fileResult.nextRelativePath),children:Object(N.jsx)(C.a,{icon:E.b})}):null]})]})},Bt=function(e){var t=_(Le),n=Object(r.useRef)(null);return Object(r.useEffect)((function(){if(n.current){var e=new it.a(n.current);e.unmark({done:function(){t.length>0&&e.mark(t,{caseSensitive:!1,separateWordSearch:!0})}})}}),[e.relativePath,e.entities,t]),Object(r.useEffect)((function(){if(n.current){window.scroll({top:0,left:0,behavior:"auto"});var t=document.getElementById(e.targetId);t&&t.scrollIntoView()}}),[e.targetId,e.relativePath,t]),Object(N.jsxs)("div",{ref:n,children:[Object(N.jsx)("div",{className:mt.a.errorView,children:(e.errors||[]).map((function(e){return Object(N.jsxs)("div",{className:mt.a.errorItem,children:["ERROR (".concat(e.row+1,", ").concat(e.column+1,"):"),Object(N.jsx)("pre",{children:e.message})]})}))}),e.entities.map((function(t){return Object(N.jsx)("div",{children:"TopLevelBlockComment"===t.type?Object(N.jsx)(bt,{renderedHtml:t.renderedHtml,rawHtml:t.rawHtml}):Object(N.jsx)(Nt,{entity:t,relativePath:e.relativePath})},t.id)}))]})},Ft=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).scheduledFunction=null,r.editor=void 0,r.state={annotations:[]},r}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.setupCompletions(),this.initializeEditor()}},{key:"shouldComponentUpdate",value:function(e,t){return e.viewedPath!==this.props.viewedPath||t.annotations!==this.state.annotations}},{key:"componentDidUpdate",value:function(e){e.viewedPath!==this.props.viewedPath&&(this.scheduledFunction&&this.scheduledFunction.flush(),this.initializeEditor())}},{key:"componentWillUnmount",value:function(){this.scheduledFunction&&this.scheduledFunction.cancel()}},{key:"areAnnotationsEqual",value:function(e,t){return e.column===t.column&&e.row===t.row&&e.text===t.text&&e.type===t.type}},{key:"saveAndUpdateAnnotations",value:function(){var e=Object(R.a)(T.a.mark((function e(t,n){var r=this;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ue(t,n);case 2:return e.next=4,Promise.all([ce().then((function(e){var n=e.errors.filter((function(e){return e.path===t})).map((function(e){return{row:Math.max(0,e.row),column:Math.max(0,e.column),text:e.message,type:"error"}})),a=!1;if(r.state.annotations.length!==n.length)a=!0;else for(var i=0;i<r.state.annotations.length;i++){var c=r.state.annotations[i],s=n[i];if(!r.areAnnotationsEqual(c,s)){a=!0;break}}a&&r.setState(Object(rt.a)(Object(rt.a)({},r.state),{},{annotations:n}))})),Q(t).then((function(e){return r.props.onFileResultChanged(e)}))]);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"initializeEditor",value:function(){var e=this;this.props.onFileResultChanged({content:"",entities:[],errors:[],relativePath:""}),function(e){return de.apply(this,arguments)}(this.props.viewedPath).then((function(t){e.editor.setValue(t),e.editor.clearSelection()}))}},{key:"setupCompletions",value:function(){Lt.setCompleters(),Lt.addCompleter({getCompletions:function(){var e=Object(R.a)(T.a.mark((function e(t,n,r,a,i){var c,s,o,u;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==a.length){e.next=2;break}return e.abrupt("return",i(null,[]));case 2:for(c=r.column,s="\n",o=0;o<c-a.length;o++)s+=" ";return e.next=7,ke("\\".concat(a));case 7:u=e.sent.map((function(e){return{name:a+e,value:a+e}})),i(null,At.concat(u).map((function(e){return{name:e.name.replace(/\\/,""),value:e.value.replace(/\\/,"").replace(/\n/g,s)}})));case 9:case"end":return e.stop()}}),e)})));return function(t,n,r,a,i){return e.apply(this,arguments)}}()})}},{key:"render",value:function(){var e=this;return Object(N.jsx)("div",{children:Object(N.jsx)(Rt.a,{ref:function(t){var n=null===t||void 0===t?void 0:t.editor;n&&n!==e.editor&&(e.editor=n)},mode:"yaml",theme:"eclipse",onChange:function(){e.scheduledFunction&&e.scheduledFunction.cancel();var t=e.props.viewedPath,n=e.editor.getValue();e.scheduledFunction=It()(Object(R.a)(T.a.mark((function r(){return T.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!e.editor){r.next=3;break}return r.next=3,e.saveAndUpdateAnnotations(t,n);case 3:case"end":return r.stop()}}),r)}))),500),e.scheduledFunction()},name:"ace-editor",editorProps:{$blockScrolling:!0},highlightActiveLine:!1,showPrintMargin:!1,enableBasicAutocompletion:!0,enableLiveAutocompletion:!1,fontSize:"90%",style:{position:"relative",width:"100%",height:"calc(100vh - 1.75em)",minHeight:"calc(100vh - 1.75em)",borderRight:"solid",borderRightWidth:"1px",borderRightColor:"#dddddd"},commands:[{name:"save",bindKey:{win:"Ctrl-s",mac:"Command-s"},exec:function(){if(e.editor)return e.saveAndUpdateAnnotations(e.props.viewedPath,e.editor.getValue())}}],annotations:this.state.annotations})})}}]),n}(a.a.Component),Ut=function(e){var t=Object(r.useState)(e.relativePath),n=Object(L.a)(t,2),a=n[0],i=n[1],c=Object(r.useState)(e.errors),s=Object(L.a)(c,2),o=s[0],u=s[1],l=Object(r.useState)(e.entities),d=Object(L.a)(l,2),h=d[0],p=d[1];return Object(N.jsxs)("div",{style:{display:"flex",flexDirection:"row",background:"#ffffff"},children:[Object(N.jsx)("div",{style:{width:"50%"},children:Object(N.jsx)(Ft,{viewedPath:e.relativePath,onFileResultChanged:function(e){e&&(i(e.relativePath),u(e.errors),p(e.entities))}})}),Object(N.jsx)("div",{style:{width:"50%",maxHeight:"calc(100vh - 1.75em)",height:"max-content",overflow:"scroll",background:"#ffffff"},children:Object(N.jsx)(Bt,{relativePath:a,errors:o,entities:h,targetId:e.targetId})})]})},Ht=n(52),Vt=n.n(Ht),Wt=n(10),$t=n.n(Wt),qt=function e(t){var n=P(),a=Object(r.useState)(t.node.isDir&&("content"===t.node.name||t.viewedPath.startsWith(t.node.path))),i=Object(L.a)(a,2),c=i[0],s=i[1],o=_(Je),u=_(We),l=Object(r.useState)(""),d=Object(L.a)(l,2),h=d[0],p=d[1],f=Object(r.useState)(!1),b=Object(L.a)(f,2),v=b[0],m=b[1],x=Object(r.useState)(!1),g=Object(L.a)(x,2),O=g[0],w=g[1],k=function(){var e=Object(R.a)(T.a.mark((function e(){var t,r;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X();case 2:return t=e.sent,n(Se(t)),e.next=6,ce();case 6:r=e.sent,n($e(r.errors.map((function(e){return{row:e.row,column:e.column,message:e.message,relativePath:e.path}}))));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function e(t,n){if(t.isDir){var r,a=[],i=Object(D.a)(t.children);try{for(i.s();!(r=i.n()).done;){var c=r.value;a=a.concat(e(c,n))}}catch(s){i.e(s)}finally{i.f()}return a}return u.filter((function(e){return e.relativePath===t.path}))},I=function(e){var n=S(t.node,e);if(!o||0===n.length)return null;var r=1===n.length?" error":" errors";return Object(N.jsxs)("span",{className:$t.a.errorStats,children:[" ","(",n.length," ",r,")"]})},A=t.node.name,M=A.indexOf("_");if(M>=0){var B=A.substring(0,M);B.length>0&&!isNaN(+B)&&(A=A.substring(M+1))}A=A.replace(".math","").replace(/_/g," ");var F=function(){var e=Object(R.a)(T.a.mark((function e(){var n,r;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h&&(t.node.isDir||h.endsWith(".math"))){e.next=3;break}return alert("The new filename must be non-empty and end in .math but found '".concat(h,"'")),e.abrupt("return");case 3:if((n=t.node.path.split("/")).pop(),n.push(h),r=n.join("/"),!t.node.isDir){e.next=14;break}return e.next=10,ve(t.node.path,r);case 10:return e.next=12,k();case 12:e.next=18;break;case 14:return e.next=16,je(t.node.path,r);case 16:return e.next=18,k();case 18:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),U=function(e){e.preventDefault(),F()},H=function(){return o?Object(N.jsxs)("span",{children:[Object(N.jsx)("button",{className:$t.a.button,style:{display:"content"===t.node.path||v||O?"none":"inline"},onClick:function(){m(!0),w(!1)},children:Object(N.jsx)(C.a,{icon:E.k,style:{filter:"drop-shadow(0.45px 0.45px 0px rgba(0, 0, 0, 0.2))"}})}),!t.node.isDir||v||O?null:Object(N.jsx)("button",{className:$t.a.button,onClick:Object(R.a)(T.a.mark((function e(){var n;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.node.path.split("/").concat("Untitled.math").join("/"),e.next=3,ye(n);case 3:return s(!0),e.next=6,k();case 6:case"end":return e.stop()}}),e)}))),children:Object(N.jsx)(C.a,{icon:E.i,style:{filter:"drop-shadow(0.45px 0.45px 0px rgba(0, 0, 0, 0.2))"}})}),!t.node.isDir||v||O?null:Object(N.jsx)("button",{className:$t.a.button,onClick:Object(R.a)(T.a.mark((function e(){var n;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.node.path.split("/").concat("Untitled").join("/"),e.next=3,ge(n);case 3:return s(!0),e.next=6,k();case 6:case"end":return e.stop()}}),e)}))),children:Object(N.jsx)(C.a,{icon:E.j,style:{filter:"drop-shadow(0.45px 0.45px 0px rgba(0, 0, 0, 0.2))"}})}),Object(N.jsx)("button",{className:$t.a.button,style:{display:v||O?"inline":"none"},onClick:Object(R.a)(T.a.mark((function e(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!v){e.next=5;break}return e.next=3,F();case 3:e.next=16;break;case 5:if(!t.node.isDir){e.next=12;break}return e.next=8,he(t.node.path);case 8:return e.next=10,k();case 10:e.next=16;break;case 12:return e.next=14,fe(t.node.path);case 14:return e.next=16,k();case 16:m(!1),w(!1);case 18:case"end":return e.stop()}}),e)}))),children:Object(N.jsx)(C.a,{icon:E.f,style:{filter:"drop-shadow(0.45px 0.45px 0px rgba(0, 0, 0, 0.2))"}})}),Object(N.jsx)("button",{className:$t.a.button,style:{display:v||O?"inline":"none"},onClick:function(){m(!1),w(!1)},children:Object(N.jsx)(C.a,{icon:E.n,style:{filter:"drop-shadow(0.45px 0.45px 0px rgba(0, 0, 0, 0.2))"}})}),Object(N.jsx)("button",{className:$t.a.button,style:{display:"content"===t.node.path||v||O?"none":"inline"},onClick:function(){w(!0),m(!1)},children:Object(N.jsx)(C.a,{icon:E.o,style:{filter:"drop-shadow(0.45px 0.45px 0px rgba(0, 0, 0, 0.2))"}})})]}):null};return t.node.isDir?Object(N.jsxs)("span",{className:$t.a.sidePanelItem,style:{width:o?"max-content":"100%",maxWidth:o?"max-content":"100%"},children:[Object(N.jsxs)("li",{className:$t.a.mathlinguaListDirItem,onClick:function(){return s(!c)},children:[c?Object(N.jsx)("button",{className:$t.a.triangle,children:Object(N.jsx)(C.a,{icon:E.d,style:{filter:"drop-shadow(0.45px 0.45px 0px rgba(0, 0, 0, 0.2))"}})}):Object(N.jsx)("button",{className:$t.a.triangle,children:Object(N.jsx)(C.a,{icon:E.e,style:{filter:"drop-shadow(0.45px 0.45px 0px rgba(0, 0, 0, 0.2))"}})}),v?Object(N.jsxs)("form",{onSubmit:U,children:[Object(N.jsx)("input",{className:$t.a.input,type:"text",placeholder:t.node.name,onChange:function(e){return p(e.target.value)}}),H()]}):Object(N.jsxs)("span",{children:[A,I(u)]}),v?null:H()]}),c?Object(N.jsx)("ul",{children:t.node.children.map((function(n){return Object(N.jsx)(e,{node:n,viewedPath:t.viewedPath},n.name)}))}):null]}):Object(N.jsx)("span",{className:$t.a.sidePanelItem,style:{width:o?"max-content":"100%",maxWidth:o?"max-content":"100%"},children:Object(N.jsxs)("li",{className:$t.a.mathlinguaListFileItem,children:[v?Object(N.jsxs)("form",{onSubmit:U,children:[Object(N.jsx)("input",{className:$t.a.input,type:"text",placeholder:t.node.name,onChange:function(e){return p(e.target.value)}}),H()]}):Object(N.jsxs)(tt.b,{to:"/".concat(t.node.path),className:t.viewedPath===t.node.path||""===t.viewedPath&&t.node.isFirstMathFile?"".concat($t.a.link," ").concat($t.a.selected):$t.a.link,onClick:function(){j()&&n(y(!1))},children:[A,I(u)]},t.node.name),v?null:H()]})})},Gt=function(e){var t,n=P(),a=_(Ne),i=_(Je),c=Object(r.useState)([]),s=Object(L.a)(c,2),o=s[0],u=s[1],l=Object(r.useState)(""),d=Object(L.a)(l,2),h=d[0],p=d[1],f=Object(r.useState)({name:"",isDir:!0,isFirstMathFile:!1,path:"",children:[]}),b=Object(L.a)(f,2),v=b[0],m=b[1];Object(r.useEffect)((function(){X().then((function(e){u(e),n(Se(e))})).catch((function(e){return p(e.message)}))}),[n]),Object(r.useEffect)((function(){m(function(e){var t,n={name:"",isDir:!0,isFirstMathFile:!1,path:"",children:[]},r=[!1],a=Object(D.a)(e);try{for(a.s();!(t=a.n()).done;){zt(n,t.value,r)}}catch(i){a.e(i)}finally{a.f()}return n}(null!==a&&void 0!==a?a:o))}),[o,a]);var j=Object(N.jsx)("div",{className:Vt.a.sidePanel,children:Object(N.jsx)(gt,{message:h})}),x=i?v:v.children[0],g=Object(N.jsx)("div",{className:Vt.a.sidePanel,style:i?{height:"calc(100vh - 1.75em)",overflow:"auto"}:{},children:null===x||void 0===x||null===(t=x.children)||void 0===t?void 0:t.map((function(t){return Object(N.jsx)(qt,{node:t,viewedPath:e.viewedPath},t.name)}))});return h?j:g};function zt(e,t,n){for(var r=t.split("/"),a=e,i=function(e){var t=r[e],i=a.children.find((function(e){return e.name===t}));if(i)a=i;else{var c=e!==r.length-1,s=!1;n[0]||c||(s=!0,n[0]=!0);var o={name:t,isDir:c,isFirstMathFile:s,path:r.slice(0,e+1).join("/"),children:[]};a.children.push(o),a=o}},c=0;c<r.length;c++)i(c)}var Jt=function(e){var t,n={viewedPath:(t=Object(nt.f)()).pathname.replace(/^\//,""),targetId:t.hash.replace(/^#/,"")},a=_(Je),i=_(O);return Object(r.useEffect)((function(){""===n.viewedPath&&function(){return _e.apply(this,arguments)}().then((function(t){return e.redirect(t)}))}),[]),""===n.viewedPath?null:a?Object(N.jsx)(Xt,{hashLocation:n,isSidePanelVisible:i}):Object(N.jsx)(Kt,{hashLocation:n,startedWithSidePanelVisible:i})},Kt=function(e){var t=P(),n=Object(r.useRef)(null),a=Object(r.useCallback)((function(){return j()||n.current&&n.current.clientWidth>=.75*window.screen.width}),[n]),i=_(O),c=Object(r.useState)(a()),s=Object(L.a)(c,2),o=s[0],u=s[1];Object(r.useEffect)((function(){var n=function(){var n=a();e.startedWithSidePanelVisible&&t(y(!n)),u(n)};return window.addEventListener("resize",n),function(){return window.removeEventListener("resize",n)}}),[]);var l="45em",d="calc((100% - ".concat(l,") / 2)");return Object(N.jsxs)("div",{style:{display:"flex",flexDirection:"row",padding:0,margin:0},children:[Object(N.jsx)("div",{style:{display:!o||i?"block":"none",width:o?"100%":d,padding:0,marginLeft:0,marginBottom:0,marginTop:"0.25em"},children:i?Object(N.jsx)("div",{style:o?{}:{float:"right"},children:Object(N.jsx)(Gt,{viewedPath:e.hashLocation.viewedPath})}):null}),Object(N.jsx)("div",{ref:n,style:{width:j()?i?"0%":"95%":l,marginTop:o?"0.5em":"1em",marginLeft:"auto",marginRight:"auto"},children:Object(N.jsx)(Mt,{viewedPath:e.hashLocation.viewedPath,targetId:e.hashLocation.targetId})}),Object(N.jsx)("div",{style:{width:o?"0%":d,display:o?"none":"block"}})]})},Xt=function(e){return Object(N.jsxs)("div",{style:{display:"flex",flexDirection:"row",padding:"0",margin:"0"},children:[Object(N.jsx)("div",{style:{width:e.isSidePanelVisible?"20%":"0"},children:e.isSidePanelVisible?Object(N.jsx)(Gt,{viewedPath:e.hashLocation.viewedPath}):null}),Object(N.jsx)("div",{style:{width:e.isSidePanelVisible?"80%":"100%",border:"solid",borderColor:"#cccccc",borderWidth:"1px",marginTop:"0.5em"},children:Object(N.jsx)(Mt,{viewedPath:e.hashLocation.viewedPath,targetId:e.hashLocation.targetId})})]})},Zt=function(){return Object(N.jsx)(tt.a,{hashType:"slash",children:Object(N.jsx)(Qt,{children:Object(N.jsxs)("div",{className:h.a.contentPanel,children:[Object(N.jsx)(et,{}),Object(N.jsx)(nt.c,{children:Object(N.jsx)(nt.a,{path:"/:relativePath(.*)",render:function(e){return Object(N.jsx)(Jt,{redirect:function(t){return e.history.push({pathname:t})}})}})})]})})})},Qt=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).state={hasError:!1},r}return Object(o.a)(n,[{key:"componentDidCatch",value:function(e,t){this.setState({hasError:!0})}},{key:"render",value:function(){return this.state.hasError?Object(N.jsxs)("p",{children:["An error occurred connecting to the MathLingua server. Are you running"," ",Object(N.jsx)("code",{children:"mlg serve"}),"?"]}):this.props.children}}]),n}(a.a.Component),Yt=n(31),en=Object(m.a)({reducer:{sidePanelVisible:w,paths:Te,query:Me,isEditMode:Xe,errorResults:qe},middleware:[Yt.a]});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(Object(N.jsx)(a.a.StrictMode,{children:Object(N.jsx)(k.a,{store:en,children:Object(N.jsx)(Zt,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},23:function(e,t,n){e.exports={searchArea:"SearchPanel_searchArea__3eH01",search:"SearchPanel_search__2HQuA",searchDropdown:"SearchPanel_searchDropdown__24NWE",searchDropdownItem:"SearchPanel_searchDropdownItem__3wg4x",searchDropdownItemSelected:"SearchPanel_searchDropdownItemSelected__20Nxq",searchButton:"SearchPanel_searchButton__2WliP",clearButton:"SearchPanel_clearButton___bhw7"}},24:function(e,t,n){e.exports={mathlinguaPage:"Page_mathlinguaPage__316SN",errorView:"Page_errorView__1w9pu",errorItem:"Page_errorItem__2mYLP",linkPanel:"Page_linkPanel__1lmJv",previousLink:"Page_previousLink__pU3BI",nextLink:"Page_nextLink__3hVie"}},30:function(e,t,n){e.exports={mathlinguaTopLevel:"TopLevelEntry_mathlinguaTopLevel__tOe0D",mathlinguaIconPane:"TopLevelEntry_mathlinguaIconPane__2KBDK",mathlinguaFlipIcon:"TopLevelEntry_mathlinguaFlipIcon__-3nJ2",mathlinguaOpenIcon:"TopLevelEntry_mathlinguaOpenIcon__8Id1v",mathlinguaCloseButton:"TopLevelEntry_mathlinguaCloseButton__o8PUx"}},39:function(e,t,n){e.exports={entitiesPanel:"EntitiesPanel_entitiesPanel__1Sx74",entitiesPanelItem:"EntitiesPanel_entitiesPanelItem__1Xi0s",closeAllButton:"EntitiesPanel_closeAllButton__1uj94"}},40:function(e,t,n){e.exports={topLevelEntityGroup:"TopLevelEntityGroup_topLevelEntityGroup__MMFuW",triangle:"TopLevelEntityGroup_triangle__7AIJb",triangleBorder:"TopLevelEntityGroup_triangleBorder__2sXGm"}},45:function(e,t,n){e.exports={githubIcon:"GitHubIcon_githubIcon__20bvO"}},48:function(e,t,n){e.exports={errorLabel:"ErrorView_errorLabel__2AXEh",errorMessage:"ErrorView_errorMessage__2gtow"}},52:function(e,t,n){e.exports={sidePanel:"SidePanel_sidePanel__2wshc"}},70:function(e,t,n){e.exports={contentPanel:"App_contentPanel__1ZGS7"}},71:function(e,t,n){e.exports={topbar:"TopBar_topbar__2sxmu"}},72:function(e,t,n){e.exports={sidePanelButton:"SidePanelButton_sidePanelButton__u4HAg"}},73:function(e,t,n){e.exports={editModeButton:"EditModeButton_editModeButton__1Orbv"}},75:function(e,t,n){e.exports={mathlinguaBlockCommentTopLevel:"BlockComment_mathlinguaBlockCommentTopLevel__dhGBJ"}},84:function(e,t,n){}},[[132,1,2]]]);
//# sourceMappingURL=main.1d91760c.chunk.js.map